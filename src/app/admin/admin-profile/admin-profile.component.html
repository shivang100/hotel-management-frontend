<div class="max-w-4xl mx-auto px-6 py-8 space-y-8">
  <!-- Header -->
  <div
    class="rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 shadow"
  >
    <div class="flex items-center justify-between gap-4">
      <div>
        <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">
          Admin Profile
        </h1>
        <p class="text-emerald-100 mt-1">
          Manage your admin identity and contact details.
        </p>
      </div>

      <button
        *ngIf="!editMode"
        (click)="onEdit()"
        class="inline-flex items-center gap-2 rounded-xl bg-white/10 px-4 py-2 text-white ring-1 ring-white/20 hover:bg-white/20 active:scale-[0.98]"
      >
        Edit Profile
      </button>
    </div>
  </div>

  <!-- View Mode -->
  <div
    *ngIf="!editMode"
    class="rounded-2xl bg-white border shadow-sm ring-1 ring-emerald-50 overflow-hidden"
  >
    <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="md:col-span-1">
        <div class="flex flex-col items-center gap-3">
          <img
            *ngIf="profile.avatar; else avatarFallback"
            [src]="profile.avatar"
            alt="Avatar"
            class="h-28 w-28 rounded-full object-cover ring-2 ring-emerald-200 shadow"
          />
          <ng-template #avatarFallback>
            <div
              class="h-28 w-28 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center text-2xl font-bold ring-2 ring-emerald-200 shadow"
              aria-label="Avatar placeholder"
            >
              {{ profile.fullName?.charAt(0) || "A" }}
            </div>
          </ng-template>

          <div class="text-center">
            <div class="text-xl font-semibold text-slate-800">
              {{ profile.fullName }}
            </div>
            <div class="text-sm text-slate-500" *ngIf="profile.title">
              {{ profile.title }}
            </div>
          </div>
        </div>
      </div>

      <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="rounded-xl border p-4">
          <div class="text-xs uppercase tracking-wide text-slate-500">
            Email
          </div>
          <div class="mt-1 font-medium text-slate-800 break-all">
            {{ profile.email }}
          </div>
        </div>
        <div class="rounded-xl border p-4">
          <div class="text-xs uppercase tracking-wide text-slate-500">
            Phone
          </div>
          <div class="mt-1 font-medium text-slate-800">
            {{ profile.phone || "—" }}
          </div>
        </div>
        <div class="sm:col-span-2 rounded-xl border p-4">
          <div class="text-xs uppercase tracking-wide text-slate-500">Bio</div>
          <div class="mt-1 text-slate-700 whitespace-pre-line">
            {{ profile.bio || "No bio added yet." }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Mode -->
  <div *ngIf="editMode" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Left: Avatar -->
    <div
      class="rounded-2xl bg-white border shadow-sm ring-1 ring-emerald-50 p-6 space-y-4"
    >
      <h2 class="text-lg font-semibold text-slate-800">Profile Photo</h2>

      <div class="flex flex-col items-center gap-4">
        <img
          *ngIf="profile.avatar; else avatarEditFallback"
          [src]="profile.avatar"
          alt="Avatar preview"
          class="h-28 w-28 rounded-full object-cover ring-2 ring-emerald-200 shadow"
        />
        <ng-template #avatarEditFallback>
          <div
            class="h-28 w-28 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center text-2xl font-bold ring-2 ring-emerald-200 shadow"
          >
            {{ profile.fullName?.charAt(0) || "A" }}
          </div>
        </ng-template>

        <label
          class="w-full cursor-pointer rounded-xl border-2 border-dashed p-4 text-center text-slate-500 hover:border-emerald-300 hover:text-emerald-700 transition"
        >
          <input
            type="file"
            class="hidden"
            accept="image/*"
            (change)="onAvatarSelected($event)"
          />
          <div class="text-sm">Click to upload</div>
          <div class="text-xs text-slate-400">PNG, JPG up to ~5MB</div>
        </label>

        <button
          type="button"
          (click)="removeAvatar()"
          class="rounded-xl border px-3 py-1.5 text-sm font-medium text-rose-700 border-rose-200 hover:bg-rose-50"
        >
          Remove
        </button>
      </div>
    </div>

    <!-- Right: Form -->
    <form
      (ngSubmit)="onSave()"
      class="lg:col-span-2 rounded-2xl bg-white border shadow-sm ring-1 ring-emerald-50 p-6 space-y-5"
    >
      <h2 class="text-lg font-semibold text-slate-800">Profile Details</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1"
            >Full Name *</label
          >
          <input
            type="text"
            [(ngModel)]="profile.fullName"
            name="fullName"
            required
            class="w-full rounded-xl border px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1"
            >Email *</label
          >
          <input
            type="email"
            [(ngModel)]="profile.email"
            name="email"
            required
            class="w-full rounded-xl border px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1"
            >Phone</label
          >
          <input
            type="tel"
            [(ngModel)]="profile.phone"
            name="phone"
            class="w-full rounded-xl border px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1"
            >Title</label
          >
          <input
            type="text"
            [(ngModel)]="profile.title"
            name="title"
            placeholder="e.g., Administrator"
            class="w-full rounded-xl border px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500"
          />
        </div>

        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-slate-700 mb-1"
            >Bio</label
          >
          <textarea
            [(ngModel)]="profile.bio"
            name="bio"
            rows="4"
            placeholder="Write a short bio…"
            class="w-full rounded-xl border px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500"
          ></textarea>
        </div>
      </div>

      <div class="flex flex-wrap items-center gap-3 pt-1">
        <button
          type="submit"
          [disabled]="saving"
          class="inline-flex items-center justify-center rounded-xl bg-emerald-600 px-5 py-2.5 font-semibold text-white shadow hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-200 active:scale-[0.99] disabled:opacity-60"
        >
          {{ saving ? "Saving…" : "Save Changes" }}
        </button>

        <button
          type="button"
          (click)="onCancel()"
          class="inline-flex items-center justify-center rounded-xl border px-5 py-2.5 font-medium text-slate-700 border-slate-200 hover:bg-slate-50 focus:outline-none focus:ring-4 focus:ring-slate-200"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
